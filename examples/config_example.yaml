# CatalyticTriadNet v2.0 配置文件示例
# 用于训练和推理的完整配置

# 模型配置
model:
  # 几何图神经网络
  gnn:
    hidden_dim: 256
    num_layers: 6
    num_heads: 8
    dropout: 0.2
    activation: 'gelu'

  # 节点和边特征维度
  node_dim: 48
  edge_dim: 14

  # EC预测器
  ec_predictor:
    num_ec1_classes: 7
    num_ec2_classes: 70
    num_ec3_classes: 300
    use_hierarchical: true

# 训练配置
training:
  # 优化器
  optimizer:
    type: 'adamw'
    lr: 1.0e-4
    weight_decay: 1.0e-5
    betas: [0.9, 0.999]

  # 学习率调度
  scheduler:
    type: 'cosine'
    T_max: 50
    eta_min: 1.0e-6

  # 训练参数
  epochs: 50
  batch_size: 4
  patience: 15
  gradient_clip: 1.0

  # 损失权重
  loss_weights:
    site: 1.0
    role: 0.5
    ec1: 0.3
    ec2: 0.2
    ec3: 0.1

# 数据配置
data:
  # M-CSA数据库
  mcsa:
    cache_dir: './data/mcsa_cache'
    force_refresh: false

  # PDB结构
  pdb:
    pdb_dir: './data/pdb_structures'
    max_residues: 1000
    edge_cutoff: 10.0

  # 数据划分
  split:
    train: 0.8
    val: 0.1
    test: 0.1
    random_seed: 42

# 推理配置
inference:
  # 阈值
  thresholds:
    site: 0.5
    role: 0.3
    ec: 0.5

  # 输出
  output:
    top_k: 15
    export_formats: ['json', 'csv', 'pml']
    export_mpnn: true
    export_rfd: true

# 纳米酶生成配置
generation:
  # 扩散模型
  diffusion:
    hidden_dim: 256
    n_layers: 6
    num_timesteps: 1000
    beta_schedule: 'linear'
    beta_start: 1.0e-4
    beta_end: 0.02

  # 生成参数
  sampling:
    n_samples: 10
    n_atoms: 50
    guidance_scale: 2.0
    refine_steps: 100

  # 约束
  constraints:
    distance_tolerance: 0.5
    angle_tolerance: 10.0
    coordination_tolerance: 0.3

# 可视化配置
visualization:
  # 2D图表
  plot_2d:
    figsize: [12, 10]
    dpi: 150
    style: 'seaborn'

  # 3D图表
  plot_3d:
    figsize: [12, 10]
    dpi: 150
    elevation: 30
    azimuth: 45

  # 颜色方案
  colors:
    use_custom: true
    colormap: 'viridis'

# 日志配置
logging:
  level: 'INFO'
  format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
  save_to_file: true
  log_dir: './logs'

# 设备配置
device:
  use_cuda: true
  cuda_device: 0
  num_workers: 4
  pin_memory: true
